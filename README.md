# 摸鱼放置游戏辅助脚本

一个功能强大的油猴脚本，为摸鱼放置游戏提供自动化任务管理、物品制造、资源监控等增强功能。

## ✨ 功能特性

- 🎯 **任务管理** - 自动获取和管理任务列表
- 🔨 **智能制造** - 自动计算依赖关系，批量制造物品
- 🎒 **物品使用** - 一键使用背包中的所有可用物品
- 📊 **资源监控** - 实时监控游戏资源，自动提醒
- 🐱 **猫咪助手** - 为猫咪分配制造任务
- 🌳 **技能分配** - 自动分配生活专精技能点，支持多种策略
- 🍖 **饱食度管理** - 自动监控并使用食物保持饱食度
- 🛡️ **战斗防护** - 自动禁用战斗功能，防止掉线
- 🐱 **酒馆专家** - 快速启用/禁用强化专家猫猫
- 🛠️ **工具栏优化** - 将生活质量工具栏转换为图标模式
- ⚙️ **灵活配置** - 可自定义各项功能开关和参数

## 🚀 快速开始

### 环境要求

- Node.js 20+
- Yarn 1.22+

### 安装依赖

```bash
yarn install
```

### 开发模式

```bash
yarn dev
```

### 构建生产版本

```bash
yarn build
```

### 代码格式化

```bash
yarn format
```

## 📦 项目结构

```
moyu-helper/
├── src/
│   ├── config/          # 配置文件
│   ├── core/            # 核心模块（WebSocket、缓存、日志、Toast）
│   ├── features/        # 功能模块
│   │   ├── battle-guard.tsx        # 战斗防护
│   │   ├── craft.tsx               # 物品制造
│   │   ├── quest.tsx               # 任务管理
│   │   ├── resource-monitor.tsx    # 资源监控
│   │   ├── satiety-manager.tsx     # 饱食度管理
│   │   ├── skill-allocation.tsx    # 技能分配
│   │   ├── tavern-expert.tsx       # 酒馆专家
│   │   └── quality-toolbar.tsx     # 工具栏优化
│   ├── types/           # TypeScript 类型定义
│   ├── ui/              # 用户界面组件
│   ├── utils/           # 工具函数
│   └── main.ts          # 应用入口
├── scripts/             # 构建脚本
└── package.json
```

## 🎮 使用说明

1. 安装 Tampermonkey 或 Violentmonkey 浏览器扩展
2. 构建脚本后安装到油猴管理器
3. 打开游戏页面，右下角会出现悬浮按钮
4. 点击按钮展开功能菜单

### 主要功能

#### 📜 任务管理
- 自动获取可接取的任务列表
- 快速查看任务详情

#### 🔨 物品制造
- 支持自动计算制造依赖
- 智能优化制造顺序
- 考虑库存自动跳过已有物品
- 支持为猫咪分配制造任务

#### 🎒 物品使用
- 一键使用背包中的所有可用物品
- 自动跳过不可用物品

#### 📊 资源监控
- 实时监控指定资源数量
- 资源不足时自动提醒
- 可自定义监控阈值

#### 🌳 技能分配
- 自动分配生活专精技能点
- 支持多种策略：效率优先、产出优先、材料优先、经验优先
- 支持7种专精：知识、制作、酿造、缝制、烹饪、熬制、种植
- 可选幸运优先模式
- 实时显示加点进度和效率统计

#### 🍖 饱食度管理
- 自动监控饱食度
- 饱食度低于阈值时自动使用食物
- 支持多种食物类型：浆果、鱼、豪华猫粮
- 可自定义阈值和目标值

#### 🛡️ 战斗防护
- 自动禁用战斗功能
- 防止因战斗导致的连接问题
- 自动重试机制
- 定期检查战斗状态

#### 🐱 酒馆专家
- 快速启用/禁用强化专家猫猫
- 一键切换工作状态
- 自动同步状态显示

#### 🛠️ 工具栏优化
- 将生活质量工具栏转换为图标模式
- 节省屏幕空间
- 支持点击展开/收起

## 🛠️ 技术栈

- TypeScript
- Preact
- Vite
- vite-plugin-monkey
- WebSocket
- Pako (数据压缩)
- Tampermonkey API

## 📝 开发说明

### 核心架构

- **WebSocket 通信** - 与游戏服务器实时通信，支持消息压缩
- **数据缓存** - 缓存游戏数据，减少请求
- **事件总线** - 模块间解耦通信
- **日志系统** - 统一的日志管理
- **Toast 通知** - 友好的用户提示
- **任务队列** - 异步任务管理
- **数据分析** - 用户行为统计

### 添加新功能

1. 在 `src/features/` 创建功能模块
2. 在 `src/ui/` 添加界面组件（如需要）
3. 在 `main.ts` 注册模块
4. 更新类型定义（如需要）

## 📄 许可证

MIT

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📌 常用命令

### Git 操作
```bash
# 合并开发分支
git merge --squash dev

# 删除本地分支
git branch -d dev

# 删除远程分支
git push origin --delete dev
```

### 发布新版本
```bash
# 更新版本号后执行
yarn release
```